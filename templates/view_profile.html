{% extends "base.html" %}

{% block title %}Profile - {{ profile.first_name }} {{ profile.last_name }}{% endblock %}

{% block page_title %}Profile{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md">
    <div class="text-center mb-6">
        {% if profile.cover_photo %}
            <img src="{{ url_for('static', filename='uploads/' ~ profile.cover_photo) }}" alt="Cover Photo" class="w-full h-64 object-cover rounded-t-lg">
        {% else %}
            <div class="w-full h-64 bg-gray-200 rounded-t-lg"></div>
        {% endif %}
        <div class="relative -mt-16">
            {% if profile.profile_picture %}
                <img src="{{ url_for('static', filename='uploads/' ~ profile.profile_picture) }}" alt="{{ profile.first_name }} {{ profile.last_name }}" class="w-32 h-32 rounded-full mx-auto border-4 border-white">
            {% else %}
                <div class="w-32 h-32 rounded-full bg-gray-200 mx-auto border-4 border-white"></div>
            {% endif %}
        </div>
    </div>
    <div class="text-center">
        <h2 class="text-xl text-gray-500">In Loving Memory of</h2>
        <h1 class="text-3xl font-bold">{{ profile.first_name }} {{ profile.last_name }}</h1>
        <p class="text-gray-600">{{ profile.date_of_birth.strftime('%b %d, %Y') }} - {{ profile.date_of_death.strftime('%b %d, %Y') if profile.date_of_death else 'Present' }}</p>
        <div class="mt-4 flex justify-center space-x-4">
            <button class="bg-white border border-yellow-500 text-yellow-500 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Favorite</button>
            <button class="bg-white border border-yellow-500 text-yellow-500 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Share</button>
        </div>
    </div>
    <div class="mt-8">
        <div class="flex justify-center space-x-8 border-b border-gray-300 pb-2">
            <a href="#timeline" class="text-gray-600 hover:text-gray-900">Timeline</a>
            <a href="#bio" class="text-gray-600 hover:text-gray-900">Bio</a>
            <a href="#media" class="text-yellow-500 border-b-2 border-yellow-500">Media</a>
            <a href="#tributes" class="text-gray-600 hover:text-gray-900">Tributes</a>
        </div>
        <div class="mt-6">
            <div id="timeline">
                <h3 class="text-xl font-bold mb-2">Timeline</h3>
                {% if profile.timelinedate %}
                    <p class="text-gray-700">{{ profile.timelinedate.strftime('%b %d, %Y') }} - {{ profile.timelinetext }}</p>
                {% else %}
                    <p class="text-gray-700">No timeline data available.</p>
                {% endif %}
            </div>
            <div id="bio" class="hidden">
                <h3 class="text-xl font-bold mb-2">Bio</h3>
                <p class="text-gray-700">{{ profile.bio }}</p>
            </div>
            <div id="media" class="hidden">
                <h3 class="text-xl font-bold mb-2">Media</h3>
                <div class="grid grid-cols-2 gap-4">
                    <!-- Example media items -->
                    <img src="https://via.placeholder.com/150" alt="Media 1" class="w-full h-48 object-cover rounded-lg">
                    <img src="https://via.placeholder.com/150" alt="Media 2" class="w-full h-48 object-cover rounded-lg">
                    <!-- Add more media items as needed -->
                </div>
            </div>
            <div id="tributes" class="hidden">
                <h3 class="text-xl font-bold mb-2">Tributes</h3>
                <!-- Add tributes content here -->
            </div>
        </div>
    </div>
    <hr class="my-6 border-gray-300">
    <div class="flex justify-end">
        <a href="{{ url_for('update_profile', profile_id=profile.id) }}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mr-4">Edit</a>
        <form method="POST" action="{{ url_for('delete_profile', profile_id=profile.id) }}" class="inline">
            {{ form.hidden_tag() }}
            <button type="submit" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Delete</button>
        </form>
    </div>
</div>
{% endblock %}